<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .assessment-dashboard {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .dashboard-header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .dashboard-header h1 {
            font-size: 2.5em;
            margin-bottom: 15px;
            font-weight: 700;
        }
        
        .progress-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #28a745;
            margin-bottom: 5px;
        }
        
        .results-table {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .results-table table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .results-table th {
            background: #f8f9fa;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: #495057;
            border-bottom: 2px solid #dee2e6;
        }
        
        .results-table td {
            padding: 15px;
            border-bottom: 1px solid #e9ecef;
            vertical-align: top;
        }
        
        .results-table tr:hover {
            background: #f8f9fa;
        }
        
        .assessment-name {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }
        
        .assessment-icon {
            font-size: 1.5em;
        }
        
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
        }
        
        .status-completed {
            background: #d4edda;
            color: #155724;
        }
        
        .status-empty {
            background: #f8d7da;
            color: #721c24;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
            margin: 2px;
            transition: all 0.2s ease;
        }
        
        .btn-primary {
            background: #28a745;
            color: white;
        }
        
        .btn-primary:hover {
            background: #218838;
            transform: translateY(-1px);
        }
        
        .btn-outline {
            background: transparent;
            color: #28a745;
            border: 2px solid #28a745;
        }
        
        .btn-outline:hover {
            background: #28a745;
            color: white;
        }
        
        .demo-notice {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .login-required {
            text-align: center;
            padding: 60px 20px;
        }
        
        @media (max-width: 768px) {
            .dashboard-header h1 {
                font-size: 2em;
            }
            
            .results-table {
                font-size: 14px;
            }
            
            .results-table th,
            .results-table td {
                padding: 10px 8px;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="assessment-dashboard">
        <div id="dashboardContent">
            <!-- Content will be loaded here -->
        </div>
    </div>

    <script>
        // Check for demo mode or show login
        function initDashboard() {
            const urlParams = new URLSearchParams(window.location.search);
            const isDemo = urlParams.get('demo') === 'true';
            
            if (isDemo || window.location.hostname === 'localhost') {
                loadDemoData();
            } else {
                showLoginScreen();
            }
        }
        
        function showLoginScreen() {
            document.getElementById('dashboardContent').innerHTML = `
                <div class="login-required">
                    <div style="font-size: 4em; margin-bottom: 20px;">🔒</div>
                    <h2 style="color: #495057; margin-bottom: 15px;">Login Required</h2>
                    <p style="color: #6c757d; margin-bottom: 30px;">
                        Please log in to view your assessment results.
                    </p>
                    <button class="btn btn-primary" onclick="startDemo()" style="font-size: 1.1em; padding: 15px 30px; margin-right: 10px;">
                        🎮 Try Demo
                    </button>
                    <a href="/login" class="btn btn-outline" style="font-size: 1.1em; padding: 15px 30px;">
                        Login
                    </a>
                </div>
            `;
        }
        
        function startDemo() {
            const url = new URL(window.location);
            url.searchParams.set('demo', 'true');
            window.location.href = url.toString();
        }
        
        function loadDemoData() {
            const demoResults = {
                skills: {
                    topSkills: 'ANALYZE, DESIGN, TEACH, COUNSEL',
                    coreStrengths: 'Strong analytical thinking and communication'
                },
                values: {
                    topValues: 'Autonomy, Challenge, Service'
                },
                interests: {
                    realistic: 15, investigative: 32, artistic: 28, 
                    social: 35, enterprising: 22, conventional: 18
                },
                personality: {
                    personalityType: 'ENFP-T',
                    traits: '67% Extraverted, 73% Intuitive, 64% Feeling'
                },
                political: {
                    politicalType: 'Progressive Left'
                }
            };
            
            renderDashboard(demoResults);
        }
        
        function renderDashboard(results) {
            const completedCount = Object.keys(results).length;
            const totalCount = 5;
            const percentage = Math.round((completedCount / totalCount) * 100);
            
            document.getElementById('dashboardContent').innerHTML = `
                <div class="demo-notice">
                    <strong>🎮 Demo Mode Active</strong> - This is sample data for testing purposes
                </div>
                
                <div class="dashboard-header">
                    <h1>🎯 My Assessment Results</h1>
                    <p>Your complete personality and career assessment profile</p>
                </div>
                
                <div class="progress-section">
                    <h3 style="text-align: center; margin-bottom: 20px;">Progress Overview</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number">${completedCount}</div>
                            <div>Completed</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${percentage}%</div>
                            <div>Complete</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">${totalCount - completedCount}</div>
                            <div>Remaining</div>
                        </div>
                    </div>
                </div>
                
                <div class="results-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Assessment</th>
                                <th>Status</th>
                                <th>Key Results</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${generateTableRows(results)}
                        </tbody>
                    </table>
                </div>
                
                <div style="text-align: center; margin-top: 30px; padding: 20px; background: #e8f5e8; border-radius: 15px;">
                    <h3 style="color: #155724; margin-bottom: 15px;">Ready to Get Started?</h3>
                    <p style="color: #495057; margin-bottom: 20px;">Create an account to save your real assessment results</p>
                    <a href="/signup" class="btn btn-primary" style="font-size: 1.1em; padding: 12px 25px;">
                        Create Account
                    </a>
                </div>
            `;
        }
        
        function generateTableRows(results) {
            const assessments = [
                { key: 'skills', name: 'Skills Self-Assessment', icon: '🎯', url: 'https://alicelayton-boop.github.io/Self-Assessments/Skills-updated-7-23-25.html' },
                { key: 'values', name: 'Values Self-Assessment', icon: '💎', url: 'https://alicelayton-boop.github.io/Self-Assessments/values-assessment.html' },
                { key: 'interests', name: 'O*NET Interest Profiler', icon: '🔍', url: 'https://www.mynextmove.org/explore/ip' },
                { key: 'personality', name: '16 Personalities Test', icon: '🧠', url: 'https://www.16personalities.com/free-personality-test' },
                { key: 'political', name: 'Pew Political Typology', icon: '🏛️', url: 'https://www.pewresearch.org/politics/quiz/political-typology/' }
            ];
            
            return assessments.map(assessment => {
                const isCompleted = results[assessment.key];
                const resultText = getResultText(assessment.key, results[assessment.key]);
                
                return `
                    <tr>
                        <td>
                            <div class="assessment-name">
                                <span class="assessment-icon">${assessment.icon}</span>
                                <span>${assessment.name}</span>
                            </div>
                        </td>
                        <td>
                            <span class="status-badge ${isCompleted ? 'status-completed' : 'status-empty'}">
                                ${isCompleted ? '✅ Completed' : '❌ Not Started'}
                            </span>
                        </td>
                        <td>${resultText}</td>
                        <td>
                            <a href="${assessment.url}" target="_blank" class="btn btn-primary">
                                ${isCompleted ? 'Retake' : 'Take Test'}
                            </a>
                        </td>
                    </tr>
                `;
            }).join('');
        }
        
        function getResultText(key, result) {
            if (!result) return 'Take this assessment to see results';
            
            switch(key) {
                case 'skills':
                    return `<strong>Top Skills:</strong> ${result.topSkills}`;
                case 'values':
                    return `<strong>Top Values:</strong> ${result.topValues}`;
                case 'interests':
                    return `<strong>RIASEC:</strong> R:${result.realistic}, I:${result.investigative}, A:${result.artistic}, S:${result.social}`;
                case 'personality':
                    return `<strong>Type:</strong> ${result.personalityType}`;
                case 'political':
                    return `<strong>Type:</strong> ${result.politicalType}`;
                default:
                    return 'Completed';
            }
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initDashboard);
    </script>
</body>
</html>